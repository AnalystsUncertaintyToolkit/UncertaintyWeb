roundA <- function(x, n) {
posneg = sign(x)
z = abs(x)*10^n
z = z + 0.5
z = trunc(z)
z = z/10^n
z*posneg
}
roundA(336.53, 0)
337*50
337*350
336.53*350
roundA(336.53*350, 0)
roundA(117785.5)
roundA(117785.5,0)
roundA(117785.5,1)
roundA(117785.5,2)
roundA(336.53*350, 1)
roundA(336.53*350, 2)
53*350
0.53*350
roundA(336.53*350, 1)
roundA(336.53*350, 0)
abs(336.63*350)
abs(336.53*350)
abs(336.53*350)*10^0
abs(336.53*350)*10^0+0.5
trunc(117786)
117786/10^0
sign(336.53*350)
(abs(336.53*350)+0.5
)
roundA
x <- roundA(336.53, 0)
x
x <- roundA(336.53*350, 0)
x
install.packages("RODBC") #used for the SQL connection
install.packages("tidyverse") #allows use of multiple functions whilst running model
install.packages("kableExtra") #Used for table formating
install.packages("data.table") # allows use of setnames
install.packages("dynlm") # Dynamic Linear Models and Time Series Regression
install.packages("modelr") # allows use of add_predictions
install.packages("DataCombine") # allows use of 'slide'
install.packages("scales") # allows percentage formatting
# function to run Monte Carlo on model
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
library(ddpcr)
library(knitr)
library(tidyverse) #allows use of multiple functions whilst running model
setwd("~/FSM model SW local/FSM volumes model SW local/")
# Create R file from Master_Control Markdown file
purl("Master_Control.Rmd", output="Master_Control.R")
# source data functions ---------------------------------------------------
source("Model/Uncertainty Development/get_unemployment_data_function.R")
source("Model/Uncertainty Development/get_regression_data_function.R")
source("Model/Uncertainty Development/get_NPP_data_function.R")
# percentiles of uncertainty variables ------------------------------------
# percentile values to pick out for uncertainty variables
regression_percentiles <-c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
unem_percentiles<- c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
NPP_percentiles <-c(0.1,0.3,0.5,0.7,0.9)
# MC loop -----------------------------------------------------------------
# keep track of run number with variable
run_num <- 0
for (unemployment_percentile in unem_percentiles){
for (regression_percentile in regression_percentiles){
for (NPP_percentile in NPP_percentiles){
# increase run_num for each run
run_num = run_num + 1
# START TIME
start_time<-Sys.time()
# generate pseudo random data for MC run -----------------------------------------
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# generate unemployment data sample
get_unemployment_data(unemployment_sample)
# get regression sample for percentile value
# sample from normal distribution with mean 0 and sd 1
regression_sample = qnorm(regression_percentile)
# the regression data function is in model (step 1a. Modify regression input data)
# this is because the regression data is produced in the model
# get NPP sample for percentile value
# sample from normal distribution with mean 0 and sd 1
NPP_sample = qnorm(NPP_percentile)
# generate NPP data sample
get_NPP_data(NPP_sample)
# Run model ---------------------------------------------------------------
# use custom function to run code in R markdown file
#quiet(source("Master_Control.R"))
# END TIME
end_time <- Sys.time()
# TIME TAKEN for run
print(run_num)
print(end_time - start_time)
}
}
}
# process outputs ---------------------------------------------------------
#source("Model/Model_outputs/get_5th_95th_percentiles_from_MC_output.R")
install.packages("fdrtool")
# function to run Monte Carlo on model
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
library(ddpcr)
library(knitr)
library(tidyverse) #allows use of multiple functions whilst running model
setwd("~/FSM model SW local/FSM volumes model SW local/")
# Create R file from Master_Control Markdown file
purl("Master_Control.Rmd", output="Master_Control.R")
# source data functions ---------------------------------------------------
source("Model/Uncertainty Development/get_unemployment_data_function.R")
source("Model/Uncertainty Development/get_regression_data_function.R")
source("Model/Uncertainty Development/get_NPP_data_function.R")
# percentiles of uncertainty variables ------------------------------------
# percentile values to pick out for uncertainty variables
regression_percentiles <-c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
unem_percentiles<- c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
NPP_percentiles <-c(0.1,0.3,0.5,0.7,0.9)
# MC loop -----------------------------------------------------------------
# keep track of run number with variable
run_num <- 0
for (unemployment_percentile in unem_percentiles){
for (regression_percentile in regression_percentiles){
for (NPP_percentile in NPP_percentiles){
# increase run_num for each run
run_num = run_num + 1
# START TIME
start_time<-Sys.time()
# generate pseudo random data for MC run -----------------------------------------
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# generate unemployment data sample
get_unemployment_data(unemployment_sample)
# get regression sample for percentile value
# sample from normal distribution with mean 0 and sd 1
regression_sample = qnorm(regression_percentile)
# the regression data function is in model (step 1a. Modify regression input data)
# this is because the regression data is produced in the model
# get NPP sample for percentile value
# sample from normal distribution with mean 0 and sd 1
NPP_sample = qnorm(NPP_percentile)
# generate NPP data sample
get_NPP_data(NPP_sample)
# Run model ---------------------------------------------------------------
# use custom function to run code in R markdown file
#quiet(source("Master_Control.R"))
# END TIME
end_time <- Sys.time()
# TIME TAKEN for run
print(run_num)
print(end_time - start_time)
}
}
}
# process outputs ---------------------------------------------------------
#source("Model/Model_outputs/get_5th_95th_percentiles_from_MC_output.R")
install.packages("ddpcr")
# function to run Monte Carlo on model
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
library(ddpcr)
library(knitr)
library(tidyverse) #allows use of multiple functions whilst running model
setwd("~/FSM model SW local/FSM volumes model SW local/")
# Create R file from Master_Control Markdown file
purl("Master_Control.Rmd", output="Master_Control.R")
# source data functions ---------------------------------------------------
source("Model/Uncertainty Development/get_unemployment_data_function.R")
source("Model/Uncertainty Development/get_regression_data_function.R")
source("Model/Uncertainty Development/get_NPP_data_function.R")
# percentiles of uncertainty variables ------------------------------------
# percentile values to pick out for uncertainty variables
regression_percentiles <-c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
unem_percentiles<- c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
NPP_percentiles <-c(0.1,0.3,0.5,0.7,0.9)
# MC loop -----------------------------------------------------------------
# keep track of run number with variable
run_num <- 0
for (unemployment_percentile in unem_percentiles){
for (regression_percentile in regression_percentiles){
for (NPP_percentile in NPP_percentiles){
# increase run_num for each run
run_num = run_num + 1
# START TIME
start_time<-Sys.time()
# generate pseudo random data for MC run -----------------------------------------
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# generate unemployment data sample
get_unemployment_data(unemployment_sample)
# get regression sample for percentile value
# sample from normal distribution with mean 0 and sd 1
regression_sample = qnorm(regression_percentile)
# the regression data function is in model (step 1a. Modify regression input data)
# this is because the regression data is produced in the model
# get NPP sample for percentile value
# sample from normal distribution with mean 0 and sd 1
NPP_sample = qnorm(NPP_percentile)
# generate NPP data sample
get_NPP_data(NPP_sample)
# Run model ---------------------------------------------------------------
# use custom function to run code in R markdown file
#quiet(source("Master_Control.R"))
# END TIME
end_time <- Sys.time()
# TIME TAKEN for run
print(run_num)
print(end_time - start_time)
}
}
}
# process outputs ---------------------------------------------------------
#source("Model/Model_outputs/get_5th_95th_percentiles_from_MC_output.R")
install.packages("BNPdensity")
# function to run Monte Carlo on model
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
library(ddpcr)
library(knitr)
library(tidyverse) #allows use of multiple functions whilst running model
library(BNPdensity)
setwd("~/FSM model SW local/FSM volumes model SW local/")
# Create R file from Master_Control Markdown file
purl("Master_Control.Rmd", output="Master_Control.R")
# source data functions ---------------------------------------------------
source("Model/Uncertainty Development/get_unemployment_data_function.R")
source("Model/Uncertainty Development/get_regression_data_function.R")
source("Model/Uncertainty Development/get_NPP_data_function.R")
# percentiles of uncertainty variables ------------------------------------
# percentile values to pick out for uncertainty variables
regression_percentiles <-c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
unem_percentiles<- c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
NPP_percentiles <-c(0.1,0.3,0.5,0.7,0.9)
# MC loop -----------------------------------------------------------------
# keep track of run number with variable
run_num <- 0
for (unemployment_percentile in unem_percentiles){
for (regression_percentile in regression_percentiles){
for (NPP_percentile in NPP_percentiles){
# increase run_num for each run
run_num = run_num + 1
# START TIME
start_time<-Sys.time()
# generate pseudo random data for MC run -----------------------------------------
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# generate unemployment data sample
get_unemployment_data(unemployment_sample)
# get regression sample for percentile value
# sample from normal distribution with mean 0 and sd 1
regression_sample = qnorm(regression_percentile)
# the regression data function is in model (step 1a. Modify regression input data)
# this is because the regression data is produced in the model
# get NPP sample for percentile value
# sample from normal distribution with mean 0 and sd 1
NPP_sample = qnorm(NPP_percentile)
# generate NPP data sample
get_NPP_data(NPP_sample)
# Run model ---------------------------------------------------------------
# use custom function to run code in R markdown file
#quiet(source("Master_Control.R"))
# END TIME
end_time <- Sys.time()
# TIME TAKEN for run
print(run_num)
print(end_time - start_time)
}
}
}
# process outputs ---------------------------------------------------------
#source("Model/Model_outputs/get_5th_95th_percentiles_from_MC_output.R")
getwd()
setwd("C:/Users/SWALSH1/FSM volumes model SW local")
# function to run Monte Carlo on model
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
library(ddpcr)
library(knitr)
library(tidyverse) #allows use of multiple functions whilst running model
library(BNPdensity)
setwd("~/FSM model SW local/FSM volumes model SW local/")
# Create R file from Master_Control Markdown file
purl("Master_Control.Rmd", output="Master_Control.R")
# source data functions ---------------------------------------------------
source("Model/Uncertainty Development/get_unemployment_data_function.R")
source("Model/Uncertainty Development/get_regression_data_function.R")
source("Model/Uncertainty Development/get_NPP_data_function.R")
# percentiles of uncertainty variables ------------------------------------
# percentile values to pick out for uncertainty variables
regression_percentiles <-c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
unem_percentiles<- c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
NPP_percentiles <-c(0.1,0.3,0.5,0.7,0.9)
# MC loop -----------------------------------------------------------------
# keep track of run number with variable
run_num <- 0
for (unemployment_percentile in unem_percentiles){
for (regression_percentile in regression_percentiles){
for (NPP_percentile in NPP_percentiles){
# increase run_num for each run
run_num = run_num + 1
# START TIME
start_time<-Sys.time()
# generate pseudo random data for MC run -----------------------------------------
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# generate unemployment data sample
get_unemployment_data(unemployment_sample)
# get regression sample for percentile value
# sample from normal distribution with mean 0 and sd 1
regression_sample = qnorm(regression_percentile)
# the regression data function is in model (step 1a. Modify regression input data)
# this is because the regression data is produced in the model
# get NPP sample for percentile value
# sample from normal distribution with mean 0 and sd 1
NPP_sample = qnorm(NPP_percentile)
# generate NPP data sample
get_NPP_data(NPP_sample)
# Run model ---------------------------------------------------------------
# use custom function to run code in R markdown file
#quiet(source("Master_Control.R"))
# END TIME
end_time <- Sys.time()
# TIME TAKEN for run
print(run_num)
print(end_time - start_time)
}
}
}
# process outputs ---------------------------------------------------------
#source("Model/Model_outputs/get_5th_95th_percentiles_from_MC_output.R")
# function to run Monte Carlo on model
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
library(ddpcr)
library(knitr)
library(tidyverse) #allows use of multiple functions whilst running model
library(BNPdensity)
setwd("C:/Users/SWALSH1/FSM volumes model SW local/)
# Create R file from Master_Control Markdown file
purl("Master_Control.Rmd", output="Master_Control.R")
# source data functions ---------------------------------------------------
source("Model/Uncertainty Development/get_unemployment_data_function.R")
source("Model/Uncertainty Development/get_regression_data_function.R")
source("Model/Uncertainty Development/get_NPP_data_function.R")
# percentiles of uncertainty variables ------------------------------------
# percentile values to pick out for uncertainty variables
regression_percentiles <-c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
unem_percentiles<- c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
NPP_percentiles <-c(0.1,0.3,0.5,0.7,0.9)
# MC loop -----------------------------------------------------------------
# keep track of run number with variable
run_num <- 0
for (unemployment_percentile in unem_percentiles){
for (regression_percentile in regression_percentiles){
for (NPP_percentile in NPP_percentiles){
# increase run_num for each run
run_num = run_num + 1
# START TIME
start_time<-Sys.time()
# generate pseudo random data for MC run -----------------------------------------
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# generate unemployment data sample
get_unemployment_data(unemployment_sample)
# get regression sample for percentile value
# sample from normal distribution with mean 0 and sd 1
regression_sample = qnorm(regression_percentile)
# the regression data function is in model (step 1a. Modify regression input data)
# this is because the regression data is produced in the model
# get NPP sample for percentile value
# sample from normal distribution with mean 0 and sd 1
NPP_sample = qnorm(NPP_percentile)
# generate NPP data sample
get_NPP_data(NPP_sample)
# Run model ---------------------------------------------------------------
# use custom function to run code in R markdown file
#quiet(source("Master_Control.R"))
# END TIME
end_time <- Sys.time()
# TIME TAKEN for run
print(run_num)
print(end_time - start_time)
}
}
}
# process outputs ---------------------------------------------------------
#source("Model/Model_outputs/get_5th_95th_percentiles_from_MC_output.R")
# function to run Monte Carlo on model
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
library(ddpcr)
library(knitr)
library(tidyverse) #allows use of multiple functions whilst running model
library(BNPdensity)
setwd("C:/Users/SWALSH1/FSM volumes model SW local/")
# Create R file from Master_Control Markdown file
purl("Master_Control.Rmd", output="Master_Control.R")
# source data functions ---------------------------------------------------
source("Model/Uncertainty Development/get_unemployment_data_function.R")
source("Model/Uncertainty Development/get_regression_data_function.R")
source("Model/Uncertainty Development/get_NPP_data_function.R")
# percentiles of uncertainty variables ------------------------------------
# percentile values to pick out for uncertainty variables
regression_percentiles <-c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
unem_percentiles<- c(0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,0.95)
NPP_percentiles <-c(0.1,0.3,0.5,0.7,0.9)
# MC loop -----------------------------------------------------------------
# keep track of run number with variable
run_num <- 0
for (unemployment_percentile in unem_percentiles){
for (regression_percentile in regression_percentiles){
for (NPP_percentile in NPP_percentiles){
# increase run_num for each run
run_num = run_num + 1
# START TIME
start_time<-Sys.time()
# generate pseudo random data for MC run -----------------------------------------
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# generate unemployment data sample
get_unemployment_data(unemployment_sample)
# get regression sample for percentile value
# sample from normal distribution with mean 0 and sd 1
regression_sample = qnorm(regression_percentile)
# the regression data function is in model (step 1a. Modify regression input data)
# this is because the regression data is produced in the model
# get NPP sample for percentile value
# sample from normal distribution with mean 0 and sd 1
NPP_sample = qnorm(NPP_percentile)
# generate NPP data sample
get_NPP_data(NPP_sample)
# Run model ---------------------------------------------------------------
# use custom function to run code in R markdown file
#quiet(source("Master_Control.R"))
# END TIME
end_time <- Sys.time()
# TIME TAKEN for run
print(run_num)
print(end_time - start_time)
}
}
}
# process outputs ---------------------------------------------------------
#source("Model/Model_outputs/get_5th_95th_percentiles_from_MC_output.R")
library(BNPdensity)
?qhalfnorm
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile)
# get unemployment sample for percentile value
# sample from half normal distribution with mean 0 and sd 1
unemployment_sample = qhalfnorm(unemployment_percentile, mean =0, sd =1)
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library(fdrtool)
?qhalfnorm
#############################################################################
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# MAKE SURE MC_RUN VARIABLE IS SET TO ONE IN Master_Control R MARKDOWN FILE
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#############################################################################
library("fdrtool")
?qhalfnorm
?qhalfnorm {fdrtool}
?rhalfnorm
?dhalfnorm
qhalfnorm(1)
??qhalfnorm
?qhalfnorm
??qhalfnorm
detach("package:BNPdensity", unload=TRUE)
?qhalfnorm
